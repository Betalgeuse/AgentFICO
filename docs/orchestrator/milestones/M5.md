# AgentFICO - Milestone M5: Feedback API

## Overview
| Field | Value |
|:---|:---|
| **Milestone ID** | M5-feedback-api |
| **Title** | AgentFICO-Agents ν”Όλ“λ°± μμ‹  API |
| **Status** | π“‹ Planned |
| **Depends On** | M4 (Testnet Deploy) |

## Why M5?
> AgentFICO-Agentsμ M6 (Feedback Collector)κ°€ μ μ vs μ‹¤μ  μ„±κ³Ό λ°μ΄ν„°λ¥Ό μμ§‘ν•κ³ ,
> μ΄λ¥Ό AgentFICO λ ν¬μ— μλ™μΌλ΅ Issue/PRμ„ μƒμ„±ν•©λ‹λ‹¤.
> 
> μ΄λ¥Ό μ„ν•΄ AgentFICOμ—μ„ ν”Όλ“λ°±μ„ μμ‹ ν•κ³  μ²λ¦¬ν•  μΈν”„λΌκ°€ ν•„μ”ν•©λ‹λ‹¤.

## Goals
- ν”Όλ“λ°± μμ‹  API μ—”λ“ν¬μΈνΈ (`POST /v1/feedback`)
- GitHub Issue ν…ν”λ¦Ώ λ° λΌλ²¨ μ¤€λΉ„
- ν”Όλ“λ°± λ¦¬ν¬νΈ μ €μ¥ κµ¬μ΅° (`docs/feedback/`)
- μ μ κ³µμ‹ μ΅°μ • μ›ν¬ν”λ΅μ° λ¬Έμ„ν™”

## Non-Goals
- μλ™ μ μ κ³µμ‹ μ΅°μ • (μλ™ κ²€ν†  ν›„ μ μ©)
- AgentFICO-Agents κ°λ° (λ³„λ„ λ ν¬)

---

## Architecture

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                  AgentFICO-Agents (M6)                          β”‚
β”‚                                                                  β”‚
β”‚  Feedback Collector Agent                                       β”‚
β”‚  β””β”€β”€ collect-performance β†’ analyze-accuracy β†’ generate-report   β”‚
β”‚                                       β”‚                          β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                        β”‚
                    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                    β”‚                                       β”‚
                    β–Ό                                       β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  POST /v1/feedback              β”‚   β”‚  GitHub Issue (gh CLI)      β”‚
β”‚  - accuracy_report              β”‚   β”‚  - .github/ISSUE_TEMPLATE/  β”‚
β”‚  - discrepancies                β”‚   β”‚    feedback.md              β”‚
β”‚  - recommendations              β”‚   β”‚  - Labels: feedback, score  β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                    β”‚                                       β”‚
                    β–Ό                                       β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  docs/feedback/                 β”‚   β”‚  Human Review               β”‚
β”‚  - YYYY-MM-DD-report.md         β”‚   β”‚  - λ¶„μ„ κ²€ν†                 β”‚
β”‚  - μ μ μ •ν™•λ„ μ΄λ ¥             β”‚   β”‚  - κ³µμ‹ μ΅°μ • κ²°μ •           β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

---

## Phase 1: API μ—”λ“ν¬μΈνΈ

### TASK-001: Feedback API μ—”λ“ν¬μΈνΈ κµ¬ν„
```yaml
task_id: M1.8-001
title: "POST /v1/feedback μ—”λ“ν¬μΈνΈ"
droid: web3-api-developer
priority: critical
depends_on: []

instructions: |
  ## λ©ν‘
  AgentFICO-Agentsμ—μ„ ν”Όλ“λ°±μ„ μμ‹ ν•λ” API κµ¬ν„
  
  ## μ—”λ“ν¬μΈνΈ
  POST /v1/feedback
  
  ## Request Body
  ```json
  {
    "reporter": "0x...",           // Feedback Collector μ£Όμ†
    "period": {
      "start": "2026-01-22",
      "end": "2026-01-29"
    },
    "accuracy": 75,                // μ μ μ •ν™•λ„ %
    "analyzed_agents": 10,
    "discrepancies": [
      {
        "agent": "0x123...",
        "score": 850,
        "expected_performance": 85,
        "actual_performance": 60,
        "diff": -25
      }
    ],
    "recommendations": [
      "μ¨μ²΄μΈ ν™λ™ κ°€μ¤‘μΉ μ¦κ°€ μ μ•",
      "x402 κ±°λ λΉλ„ λ°μ μ μ•"
    ],
    "signature": "0x..."           // λ¦¬ν¬ν„° μ„λ…
  }
  ```
  
  ## Response
  ```json
  {
    "received": true,
    "report_id": "FB-2026-01-29-001",
    "stored_at": "docs/feedback/2026-01-29-report.md"
  }
  ```
  
  ## κ²€μ¦
  - μ„λ… κ²€μ¦ (λ¦¬ν¬ν„° μ£Όμ† ν™•μΈ)
  - ν•„μ ν•„λ“ κ²€μ¦

deliverables:
  - api/src/routes/feedback.py
  - api/src/schemas/feedback.py
  - api/src/services/feedback_handler.py

acceptance_criteria:
  - [ ] μ—”λ“ν¬μΈνΈ λ™μ‘
  - [ ] μ„λ… κ²€μ¦ ν†µκ³Ό
  - [ ] ν”Όλ“λ°± μ €μ¥ μ„±κ³µ
```

### TASK-002: ν”Όλ“λ°± μ €μ¥ λ° Markdown μƒμ„±
```yaml
task_id: M1.8-002
title: "ν”Όλ“λ°± λ¦¬ν¬νΈ Markdown μƒμ„±"
droid: web3-api-developer
priority: high
depends_on: [M1.8-001]

instructions: |
  ## λ©ν‘
  μμ‹ λ ν”Όλ“λ°±μ„ Markdown νμΌλ΅ μ €μ¥
  
  ## μ €μ¥ μ„μΉ
  docs/feedback/YYYY-MM-DD-report.md
  
  ## νμΌ ν•μ‹
  ```markdown
  # Feedback Report: 2026-01-29
  
  ## Overview
  | Field | Value |
  |:---|:---|
  | Reporter | 0x... (Feedback Collector) |
  | Period | 2026-01-22 ~ 2026-01-29 |
  | Accuracy | 75% |
  | Analyzed Agents | 10 |
  
  ## Discrepancies
  
  | Agent | Score | Expected | Actual | Diff |
  |:---|:---|:---|:---|:---|
  | 0x123... | 850 | 85% | 60% | -25% |
  
  ## Recommendations
  
  1. μ¨μ²΄μΈ ν™λ™ κ°€μ¤‘μΉ μ¦κ°€ μ μ•
  2. x402 κ±°λ λΉλ„ λ°μ μ μ•
  
  ---
  *Generated by AgentFICO Feedback API*
  ```

deliverables:
  - api/src/services/report_generator.py
  - docs/feedback/.gitkeep

acceptance_criteria:
  - [ ] Markdown νμΌ μƒμ„±
  - [ ] μ •ν™•ν• ν•μ‹ μ μ§€
```

---

## Phase 2: GitHub μΈν”„λΌ

### TASK-003: Issue ν…ν”λ¦Ώ μƒμ„±
```yaml
task_id: M1.8-003
title: "GitHub Issue ν…ν”λ¦Ώ μƒμ„±"
droid: web3-api-developer
priority: high
depends_on: []

instructions: |
  ## λ©ν‘
  AgentFICO-Agentsκ°€ μλ™ μƒμ„±ν•  Issue ν…ν”λ¦Ώ μ¤€λΉ„
  
  ## νμΌ
  .github/ISSUE_TEMPLATE/feedback.md
  
  ## λ‚΄μ©
  ```markdown
  ---
  name: Feedback Report
  about: AgentFICO-Agents ν”Όλ“λ°± λ¦¬ν¬νΈ
  title: '[Feedback] YYYY-MM-DD Score Accuracy Report'
  labels: feedback, score-formula
  assignees: ''
  ---
  
  ## Feedback Report from AgentFICO-Agents
  
  **Reporter**: <!-- Feedback Collector μ£Όμ† -->
  **Period**: <!-- λ¶„μ„ κΈ°κ°„ -->
  
  ### Summary
  - μ μ μ •ν™•λ„: <!-- % -->
  - λ¶„μ„λ μ—μ΄μ „νΈ: <!-- κ°μ -->
  
  ### Discrepancies
  <!-- μ μ vs μ‹¤μ  μ„±κ³Ό λ¶μΌμΉ ν…μ΄λΈ” -->
  
  ### Recommendations
  <!-- μ μ κ³µμ‹ μ΅°μ • μ μ• -->
  
  ---
  *μλ™ μƒμ„±λ¨ by Feedback Collector Agent*
  ```

deliverables:
  - .github/ISSUE_TEMPLATE/feedback.md
  - .github/labels.yml (feedback, score-formula λΌλ²¨)

acceptance_criteria:
  - [ ] ν…ν”λ¦Ώ νμΌ μƒμ„±
  - [ ] λΌλ²¨ μ„¤μ •
```

### TASK-004: ν”Όλ“λ°± μ²λ¦¬ μ›ν¬ν”λ΅μ° λ¬Έμ„ν™”
```yaml
task_id: M1.8-004
title: "ν”Όλ“λ°± μ²λ¦¬ μ›ν¬ν”λ΅μ° λ¬Έμ„ν™”"
droid: web3-api-developer
priority: medium
depends_on: [M1.8-003]

instructions: |
  ## λ©ν‘
  ν”Όλ“λ°± μμ‹  ν›„ μ μ κ³µμ‹ μ΅°μ •κΉμ§€μ μ›ν¬ν”λ΅μ° λ¬Έμ„ν™”
  
  ## λ¬Έμ„ λ‚΄μ©
  1. ν”Όλ“λ°± μμ‹  ν”λ΅μ°
  2. μλ™ Issue μƒμ„± μ΅°κ±΄
  3. κ²€ν†  ν”„λ΅μ„Έμ¤
  4. μ μ κ³µμ‹ μ΅°μ • μ μ°¨
  5. ADR μ‘μ„± κ°€μ΄λ“
  
  ## μ›ν¬ν”λ΅μ°
  ```
  1. AgentFICO-Agents M6 β†’ POST /v1/feedback
  2. accuracy < 80% β†’ GitHub Issue μλ™ μƒμ„±
  3. ν€ κ²€ν†  (μ£Όκ°„)
  4. μ΅°μ • ν•„μ” μ‹ β†’ ADR μ‘μ„± β†’ Score Formula μμ •
  5. ν…μ¤νΈ β†’ λ°°ν¬
  ```

deliverables:
  - docs/FEEDBACK_WORKFLOW.md

acceptance_criteria:
  - [ ] μ›ν¬ν”λ΅μ° λ¬Έμ„ν™” μ™„λ£
  - [ ] μμ‹ ν¬ν•¨
```

---

## Droid Assignment

| Task | Droid | Reason |
|:---|:---|:---|
| M1.8-001 | web3-api-developer | API μ—”λ“ν¬μΈνΈ |
| M1.8-002 | web3-api-developer | λ¦¬ν¬νΈ μƒμ„± |
| M1.8-003 | web3-api-developer | GitHub ν…ν”λ¦Ώ |
| M1.8-004 | web3-api-developer | λ¬Έμ„ν™” |

## Timeline

| Day | Tasks | Deliverable |
|:---|:---|:---|
| Day 1 | M1.8-001 | Feedback API |
| Day 2 | M1.8-002, M1.8-003 | λ¦¬ν¬νΈ + ν…ν”λ¦Ώ |
| Day 3 | M1.8-004 | μ›ν¬ν”λ΅μ° λ¬Έμ„ |

## Success Criteria

- [ ] POST /v1/feedback μ—”λ“ν¬μΈνΈ λ™μ‘
- [ ] ν”Όλ“λ°± Markdown λ¦¬ν¬νΈ μλ™ μƒμ„±
- [ ] GitHub Issue ν…ν”λ¦Ώ μ¤€λΉ„
- [ ] ν”Όλ“λ°± μ²λ¦¬ μ›ν¬ν”λ΅μ° λ¬Έμ„ν™”

## References

- [AgentFICO-Agents M6](../../../../AgentFICO-Agents/docs/orchestrator/milestones/M6.md) - Feedback Collector
- [ADR-003](../../adr/ADR-003-score-formula.md) - μ μ κ³µμ‹
